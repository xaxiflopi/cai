
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../tools/">
      
      
        <link rel="next" href="../tracing/">
      
      
      <link rel="icon" href="../assets/imago.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>Handoffs - CAI</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#handoffs" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="CAI" class="md-header__button md-logo" aria-label="CAI" data-md-component="logo">
      
  <img src="../assets/imago.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CAI
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Handoffs
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="CAI" class="md-nav__button md-logo" aria-label="CAI" data-md-component="logo">
      
  <img src="../assets/imago.png" alt="logo">

    </a>
    CAI
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Intro
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cai_installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cai_quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quickstart
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cai_list_of_models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    List of Models
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cai_architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cai_development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Start Building
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Start Building
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_1" checked>
        
          
          <label class="md-nav__link" for="__nav_7_1" id="__nav_7_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Documentation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7_1">
            <span class="md-nav__icon md-icon"></span>
            Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agents
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../running_agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running agents
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../results/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Results
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../streaming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Streaming
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tools
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Handoffs
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Handoffs
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creating-a-handoff" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a handoff
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating a handoff">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizing-handoffs-via-the-handoff-function" class="md-nav__link">
    <span class="md-ellipsis">
      Customizing handoffs via the handoff() function
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handoff-inputs" class="md-nav__link">
    <span class="md-ellipsis">
      Handoff inputs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-filters" class="md-nav__link">
    <span class="md-ellipsis">
      Input filters
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recommended-prompts" class="md-nav__link">
    <span class="md-ellipsis">
      Recommended prompts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#all-in-one-example" class="md-nav__link">
    <span class="md-ellipsis">
      All-in-one example
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tracing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ⚠️ Tracing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../context/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Context management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guardrails/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Guardrails
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../multi_agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Orchestrating multiple agents
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_2_1" >
        
          
          <label class="md-nav__link" for="__nav_7_2_1" id="__nav_7_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Agents
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2_1">
            <span class="md-nav__icon md-icon"></span>
            Agents
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ref/agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agents
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ref/run/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Runner
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ref/tool/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tools
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ref/result/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Results
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ref/stream_events/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Streaming events
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ref/handoffs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Handoffs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ref/lifecycle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lifecycle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ref/items/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Items
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ref/run_context/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Run context
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ref/usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Usage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ref/exceptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exceptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ref/guardrail/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Guardrails
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ref/model_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Model settings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ref/agent_output/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agent output
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ref/function_schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Function schema
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ref/models/interface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Model interface
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ref/models/openai_chatcompletions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAI Chat Completions model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ref/models/openai_responses/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAI Responses model
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_2_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2_2" id="__nav_7_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Extensions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2_2">
            <span class="md-nav__icon md-icon"></span>
            Extensions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ref/extensions/handoff_filters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Handoff filters
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ref/extensions/handoff_prompt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Handoff prompt
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    More About CAI
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            More About CAI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cai_faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cai_find_us/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Find Us
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cai_citation_and_acknowledgments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Citation & Acknowledgments
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creating-a-handoff" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a handoff
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating a handoff">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizing-handoffs-via-the-handoff-function" class="md-nav__link">
    <span class="md-ellipsis">
      Customizing handoffs via the handoff() function
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handoff-inputs" class="md-nav__link">
    <span class="md-ellipsis">
      Handoff inputs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-filters" class="md-nav__link">
    <span class="md-ellipsis">
      Input filters
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recommended-prompts" class="md-nav__link">
    <span class="md-ellipsis">
      Recommended prompts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#all-in-one-example" class="md-nav__link">
    <span class="md-ellipsis">
      All-in-one example
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="handoffs">Handoffs</h1>
<p>Handoffs allow an agent to delegate tasks to another agent. This is particularly useful in scenarios where different agents specialize in distinct areas. For example, a customer support app might have agents that each specifically handle tasks like order status, refunds, FAQs, etc.</p>
<p>Handoffs are represented as tools to the LLM. So if there's a handoff to an agent named <code>Flag Discriminator</code>, the tool would be called <code>transfer_to_flag_discriminator</code>.</p>
<h2 id="creating-a-handoff">Creating a handoff</h2>
<p>All agents have a <a class="autorefs autorefs-internal" title="handoffs


  
      class-attribute
      instance-attribute
  " href="../ref/agent/#cai.sdk.agents.agent.Agent.handoffs"><code>handoffs</code></a> param, which can either take an <code>Agent</code> directly, or a <code>Handoff</code> object that customizes the Handoff.</p>
<p>You can create a handoff using the <a class="autorefs autorefs-internal" title="handoff" href="../ref/handoffs/#cai.sdk.agents.handoffs.handoff"><code>handoff()</code></a> function provided. This function allows you to specify the agent to hand off to, along with optional overrides and input filters.</p>
<h3 id="basic-usage">Basic Usage</h3>
<p>Here's how you can create a simple handoff:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><span class="kn">from</span><span class="w"> </span><span class="nn">cai.sdk.agents</span><span class="w"> </span><span class="kn">import</span> <span class="n">Agent</span><span class="p">,</span> <span class="n">handoff</span>
</span><span id="__span-0-2">
</span><span id="__span-0-3"><span class="n">crypto_agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Cryptography Agent&quot;</span><span class="p">)</span>
</span><span id="__span-0-4"><span class="n">bash_agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Bash Agent&quot;</span><span class="p">)</span>
</span><span id="__span-0-5">
</span><span id="__span-0-6"><span class="c1"># (1)!</span>
</span><span id="__span-0-7"><span class="n">cybersecurity_lead</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Cybersecurity Lead Agent&quot;</span><span class="p">,</span> <span class="n">handoffs</span><span class="o">=</span><span class="p">[</span><span class="n">crypto_agent</span><span class="p">,</span> <span class="n">handoff</span><span class="p">(</span><span class="n">bash_agent</span><span class="p">)])</span>
</span></code></pre></div>
<ol>
<li>You can use the agent directly (as in <code>crypto_agent</code>), or you can use the <code>handoff()</code> function.</li>
</ol>
<h3 id="customizing-handoffs-via-the-handoff-function">Customizing handoffs via the <code>handoff()</code> function</h3>
<p>The <a class="autorefs autorefs-internal" title="handoff" href="../ref/handoffs/#cai.sdk.agents.handoffs.handoff"><code>handoff()</code></a> function lets you customize things.</p>
<ul>
<li><code>agent</code>: This is the agent to which things will be handed off.</li>
<li><code>tool_name_override</code>: By default, the <code>Handoff.default_tool_name()</code> function is used, which resolves to <code>transfer_to_&lt;agent_name&gt;</code>. You can override this.</li>
<li><code>tool_description_override</code>: Override the default tool description from <code>Handoff.default_tool_description()</code></li>
<li><code>on_handoff</code>: A callback function executed when the handoff is invoked. This is useful for things like kicking off some data fetching as soon as you know a handoff is being invoked. This function receives the agent context, and can optionally also receive LLM generated input. The input data is controlled by the <code>input_type</code> param.</li>
<li><code>input_type</code>: The type of input expected by the handoff (optional).</li>
<li><code>input_filter</code>: This lets you filter the input received by the next agent. See below for more.</li>
</ul>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><span class="kn">from</span><span class="w"> </span><span class="nn">cai.sdk.agents</span><span class="w"> </span><span class="kn">import</span> <span class="n">Agent</span><span class="p">,</span> <span class="n">handoff</span><span class="p">,</span> <span class="n">RunContextWrapper</span>
</span><span id="__span-1-2">
</span><span id="__span-1-3"><span class="k">def</span><span class="w"> </span><span class="nf">on_handoff</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">RunContextWrapper</span><span class="p">[</span><span class="kc">None</span><span class="p">]):</span>
</span><span id="__span-1-4">    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Handoff called&quot;</span><span class="p">)</span>
</span><span id="__span-1-5">
</span><span id="__span-1-6"><span class="n">agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;My agent&quot;</span><span class="p">)</span>
</span><span id="__span-1-7">
</span><span id="__span-1-8"><span class="n">handoff_obj</span> <span class="o">=</span> <span class="n">handoff</span><span class="p">(</span>
</span><span id="__span-1-9">    <span class="n">agent</span><span class="o">=</span><span class="n">agent</span><span class="p">,</span>
</span><span id="__span-1-10">    <span class="n">on_handoff</span><span class="o">=</span><span class="n">on_handoff</span><span class="p">,</span>
</span><span id="__span-1-11">    <span class="n">tool_name_override</span><span class="o">=</span><span class="s2">&quot;custom_handoff_tool&quot;</span><span class="p">,</span>
</span><span id="__span-1-12">    <span class="n">tool_description_override</span><span class="o">=</span><span class="s2">&quot;Custom description&quot;</span><span class="p">,</span>
</span><span id="__span-1-13"><span class="p">)</span>
</span></code></pre></div>
<h2 id="handoff-inputs">Handoff inputs</h2>
<p>In certain situations, you want the LLM to provide some data when it calls a handoff. For example, imagine a handoff to an "Escalation agent". You might want a reason to be provided, so you can log it.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>
</span><span id="__span-2-2">
</span><span id="__span-2-3"><span class="kn">from</span><span class="w"> </span><span class="nn">cai.sdk.agents</span><span class="w"> </span><span class="kn">import</span> <span class="n">Agent</span><span class="p">,</span> <span class="n">handoff</span><span class="p">,</span> <span class="n">RunContextWrapper</span>
</span><span id="__span-2-4">
</span><span id="__span-2-5"><span class="k">class</span><span class="w"> </span><span class="nc">EscalationData</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span><span id="__span-2-6">    <span class="n">reason</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-2-7">
</span><span id="__span-2-8"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">on_handoff</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="n">RunContextWrapper</span><span class="p">[</span><span class="kc">None</span><span class="p">],</span> <span class="n">input_data</span><span class="p">:</span> <span class="n">EscalationData</span><span class="p">):</span>
</span><span id="__span-2-9">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Escalation agent called with reason: </span><span class="si">{</span><span class="n">input_data</span><span class="o">.</span><span class="n">reason</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-2-10">
</span><span id="__span-2-11"><span class="n">agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Escalation agent&quot;</span><span class="p">)</span>
</span><span id="__span-2-12">
</span><span id="__span-2-13"><span class="n">handoff_obj</span> <span class="o">=</span> <span class="n">handoff</span><span class="p">(</span>
</span><span id="__span-2-14">    <span class="n">agent</span><span class="o">=</span><span class="n">agent</span><span class="p">,</span>
</span><span id="__span-2-15">    <span class="n">on_handoff</span><span class="o">=</span><span class="n">on_handoff</span><span class="p">,</span>
</span><span id="__span-2-16">    <span class="n">input_type</span><span class="o">=</span><span class="n">EscalationData</span><span class="p">,</span>
</span><span id="__span-2-17"><span class="p">)</span>
</span></code></pre></div>
<h2 id="input-filters">Input filters</h2>
<p>When a handoff occurs, it's as though the new agent takes over the conversation, and gets to see the entire previous conversation history. If you want to change this, you can set an <a class="autorefs autorefs-internal" title="input_filter


  
      class-attribute
      instance-attribute
  " href="../ref/handoffs/#cai.sdk.agents.handoffs.Handoff.input_filter"><code>input_filter</code></a>. An input filter is a function that receives the existing input via a <a class="autorefs autorefs-internal" title="HandoffInputData


  
      dataclass
  " href="../ref/handoffs/#cai.sdk.agents.handoffs.HandoffInputData"><code>HandoffInputData</code></a>, and must return a new <code>HandoffInputData</code>.</p>
<p>There are some common patterns (for example removing all tool calls from the history), which are implemented for you in <a class="autorefs autorefs-internal" href="../ref/extensions/handoff_filters/#cai.sdk.agents.extensions.handoff_filters"><code>cai.sdk.agents.extensions.handoff_filters</code></a></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><span class="kn">from</span><span class="w"> </span><span class="nn">cai.sdk.agents</span><span class="w"> </span><span class="kn">import</span> <span class="n">Agent</span><span class="p">,</span> <span class="n">handoff</span>
</span><span id="__span-3-2"><span class="kn">from</span><span class="w"> </span><span class="nn">agents.extensions</span><span class="w"> </span><span class="kn">import</span> <span class="n">handoff_filters</span>
</span><span id="__span-3-3">
</span><span id="__span-3-4"><span class="n">network_agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Network Agent&quot;</span><span class="p">)</span>
</span><span id="__span-3-5">
</span><span id="__span-3-6"><span class="n">handoff_obj</span> <span class="o">=</span> <span class="n">handoff</span><span class="p">(</span>
</span><span id="__span-3-7">    <span class="n">agent</span><span class="o">=</span><span class="n">network_agent</span><span class="p">,</span>
</span><span id="__span-3-8">    <span class="n">input_filter</span><span class="o">=</span><span class="n">handoff_filters</span><span class="o">.</span><span class="n">remove_all_tools</span><span class="p">,</span> <span class="c1"># (1)!</span>
</span><span id="__span-3-9"><span class="p">)</span>
</span></code></pre></div>
<p>(1). This will automatically remove all tools from the history when <code>Network Agent</code> is called.</p>
<h2 id="recommended-prompts">Recommended prompts</h2>
<p>To make sure that LLMs understand handoffs properly, we recommend including information about handoffs in your agents. We have a suggested prefix in <a class="autorefs autorefs-internal" title="RECOMMENDED_PROMPT_PREFIX


  
      module-attribute
  " href="../ref/extensions/handoff_prompt/#cai.sdk.agents.extensions.handoff_prompt.RECOMMENDED_PROMPT_PREFIX"><code>cai.sdk.agents.extensions.handoff_prompt.RECOMMENDED_PROMPT_PREFIX</code></a>, or you can call <a class="autorefs autorefs-internal" title="prompt_with_handoff_instructions" href="../ref/extensions/handoff_prompt/#cai.sdk.agents.extensions.handoff_prompt.prompt_with_handoff_instructions"><code>cai.sdk.agents.extensions.handoff_prompt.prompt_with_handoff_instructions</code></a> to automatically add recommended data to your prompts.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><span class="kn">from</span><span class="w"> </span><span class="nn">cai.sdk.agents</span><span class="w"> </span><span class="kn">import</span> <span class="n">Agent</span>
</span><span id="__span-4-2"><span class="kn">from</span><span class="w"> </span><span class="nn">agents.extensions.handoff_prompt</span><span class="w"> </span><span class="kn">import</span> <span class="n">RECOMMENDED_PROMPT_PREFIX</span>
</span><span id="__span-4-3">
</span><span id="__span-4-4"><span class="n">billing_agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
</span><span id="__span-4-5">    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Phising Agent&quot;</span><span class="p">,</span>
</span><span id="__span-4-6">    <span class="n">instructions</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">RECOMMENDED_PROMPT_PREFIX</span><span class="si">}</span>
</span><span id="__span-4-7"><span class="s2">    &lt;Fill in the rest of your prompt here&gt;.&quot;&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-4-8"><span class="p">)</span>
</span></code></pre></div>
<h2 id="all-in-one-example">All-in-one example</h2>
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1">We will represent the following workflow. You can make it more or less complex, depending on your needs.
</span><span id="__span-5-2">
</span><span id="__span-5-3">                     ┌───────────────────┐
</span><span id="__span-5-4">                     │ Cybersecurity     │
</span><span id="__span-5-5">User Request ───────►│ Lead Agent        │
</span><span id="__span-5-6">                     └───────┬───────────┘
</span><span id="__span-5-7">              ┌──────────────┴──────────────┐
</span><span id="__span-5-8">              │                             │
</span><span id="__span-5-9">    ┌─────────▼────────┐         ┌─────────▼────────┐
</span><span id="__span-5-10">    │ Bash Agent       │         │ Crypto Agent     │
</span><span id="__span-5-11">    └─────────┬────────┘         └──────────────────┘
</span><span id="__span-5-12">              │
</span><span id="__span-5-13">    ┌─────────▼────────┐
</span><span id="__span-5-14">    │ Flag             │
</span><span id="__span-5-15">    │ Discriminator    │
</span><span id="__span-5-16">    └──────────────────┘
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><span class="kn">from</span><span class="w"> </span><span class="nn">cai.sdk.agents</span><span class="w"> </span><span class="kn">import</span> <span class="n">Agent</span><span class="p">,</span> <span class="n">OpenAIChatCompletionsModel</span>
</span><span id="__span-6-2"><span class="kn">from</span><span class="w"> </span><span class="nn">openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">AsyncOpenAI</span>
</span><span id="__span-6-3"><span class="kn">from</span><span class="w"> </span><span class="nn">cai.sdk.agents</span><span class="w"> </span><span class="kn">import</span> <span class="n">handoff</span><span class="p">,</span> <span class="n">function_tool</span><span class="p">,</span> <span class="n">trace</span>
</span><span id="__span-6-4"><span class="kn">from</span><span class="w"> </span><span class="nn">cai.sdk.agents</span><span class="w"> </span><span class="kn">import</span> <span class="n">Runner</span>
</span><span id="__span-6-5"><span class="kn">from</span><span class="w"> </span><span class="nn">cai.tools.common</span><span class="w"> </span><span class="kn">import</span> <span class="n">run_command</span>
</span><span id="__span-6-6"><span class="kn">from</span><span class="w"> </span><span class="nn">cai.sdk.agents.extensions.handoff_prompt</span><span class="w"> </span><span class="kn">import</span> <span class="n">RECOMMENDED_PROMPT_PREFIX</span>
</span><span id="__span-6-7"><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
</span><span id="__span-6-8"><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
</span><span id="__span-6-9">
</span><span id="__span-6-10">
</span><span id="__span-6-11"><span class="nd">@function_tool</span>
</span><span id="__span-6-12"><span class="k">def</span><span class="w"> </span><span class="nf">execute_cli_command</span><span class="p">(</span><span class="n">command</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="__span-6-13"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Execute a command-line command and return its output.&quot;&quot;&quot;</span>
</span><span id="__span-6-14">    <span class="k">return</span> <span class="n">run_command</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
</span><span id="__span-6-15">
</span><span id="__span-6-16">
</span><span id="__span-6-17"><span class="c1"># Create the Flag Discriminator Agent (terminal agent in the chain)</span>
</span><span id="__span-6-18"><span class="n">flag_discriminator</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
</span><span id="__span-6-19">    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Flag Discriminator Agent&quot;</span><span class="p">,</span>
</span><span id="__span-6-20">    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Agent specialized in verifying if content matches the expected flag format in CTF challenges&quot;</span><span class="p">,</span>
</span><span id="__span-6-21">    <span class="n">instructions</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">RECOMMENDED_PROMPT_PREFIX</span><span class="si">}</span>
</span><span id="__span-6-22"><span class="s2">    You are an expert at identifying CTF flags. The final flag is the first file of a -ls command. You return the flag with this format: flag</span><span class="se">{{</span><span class="s2">filename</span><span class="se">}}</span><span class="s2">&quot;&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-6-23">    <span class="n">handoff_description</span><span class="o">=</span><span class="s2">&quot;Specialized agent in determining whether the content corresponds to the flag of the CTF challenge&quot;</span><span class="p">,</span>
</span><span id="__span-6-24">    <span class="n">handoffs</span><span class="o">=</span><span class="p">[],</span>
</span><span id="__span-6-25">    <span class="n">model</span><span class="o">=</span><span class="n">OpenAIChatCompletionsModel</span><span class="p">(</span>
</span><span id="__span-6-26">        <span class="n">model</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;CAI_MODEL&#39;</span><span class="p">,</span> <span class="s2">&quot;qwen2.5:72b&quot;</span><span class="p">),</span>
</span><span id="__span-6-27">        <span class="n">openai_client</span><span class="o">=</span><span class="n">AsyncOpenAI</span><span class="p">(),</span>
</span><span id="__span-6-28">    <span class="p">)</span>
</span><span id="__span-6-29"><span class="p">)</span>
</span><span id="__span-6-30">
</span><span id="__span-6-31"><span class="c1"># Create the Bash Agent (can hand off to Flag Discriminator)</span>
</span><span id="__span-6-32"><span class="n">bash_agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
</span><span id="__span-6-33">    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Bash Agent&quot;</span><span class="p">,</span>
</span><span id="__span-6-34">    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Agent specialized in Bash commands and Linux operations&quot;</span><span class="p">,</span>
</span><span id="__span-6-35">    <span class="n">instructions</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">RECOMMENDED_PROMPT_PREFIX</span><span class="si">}</span>
</span><span id="__span-6-36"><span class="s2">    You are a Bash and Linux expert. Use your knowledge to navigate the file system and execute commands.</span>
</span><span id="__span-6-37"><span class="s2">    The final flag is the first element listed in the directory. </span>
</span><span id="__span-6-38"><span class="s2">    When you find the name of the file, handoff to the Flag Discriminator Agent for verification.&quot;&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-6-39">    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">execute_cli_command</span><span class="p">],</span>
</span><span id="__span-6-40">    <span class="n">handoffs</span><span class="o">=</span><span class="p">[</span><span class="n">handoff</span><span class="p">(</span><span class="n">flag_discriminator</span><span class="p">)],</span>
</span><span id="__span-6-41">    <span class="n">handoff_description</span><span class="o">=</span><span class="s2">&quot;Specialized agent in Bash commands and Linux operations&quot;</span><span class="p">,</span>
</span><span id="__span-6-42">    <span class="n">model</span><span class="o">=</span><span class="n">OpenAIChatCompletionsModel</span><span class="p">(</span>
</span><span id="__span-6-43">        <span class="n">model</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;CAI_MODEL&#39;</span><span class="p">,</span> <span class="s2">&quot;qwen2.5:14b&quot;</span><span class="p">),</span>
</span><span id="__span-6-44">        <span class="n">openai_client</span><span class="o">=</span><span class="n">AsyncOpenAI</span><span class="p">(),</span>
</span><span id="__span-6-45">    <span class="p">)</span>
</span><span id="__span-6-46"><span class="p">)</span>
</span><span id="__span-6-47">
</span><span id="__span-6-48"><span class="c1"># Create the Crypto Agent</span>
</span><span id="__span-6-49"><span class="n">crypto_agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
</span><span id="__span-6-50">    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Cryptography Agent&quot;</span><span class="p">,</span>
</span><span id="__span-6-51">    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Agent specialized in cryptography, ciphers, and encoding/decoding&quot;</span><span class="p">,</span>
</span><span id="__span-6-52">    <span class="n">instructions</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">RECOMMENDED_PROMPT_PREFIX</span><span class="si">}</span>
</span><span id="__span-6-53"><span class="s2">    You are a cryptography expert. Help decipher and decode encrypted messages or files.&quot;&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-6-54">    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">execute_cli_command</span><span class="p">],</span>
</span><span id="__span-6-55">    <span class="n">handoffs</span><span class="o">=</span><span class="p">[],</span>
</span><span id="__span-6-56">    <span class="n">handoff_description</span><span class="o">=</span><span class="s2">&quot;Specialized agent in cryptography and codebreaking&quot;</span><span class="p">,</span>
</span><span id="__span-6-57">    <span class="n">model</span><span class="o">=</span><span class="n">OpenAIChatCompletionsModel</span><span class="p">(</span>
</span><span id="__span-6-58">        <span class="n">model</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;CAI_MODEL&#39;</span><span class="p">,</span> <span class="s2">&quot;qwen2.5:14b&quot;</span><span class="p">),</span>
</span><span id="__span-6-59">        <span class="n">openai_client</span><span class="o">=</span><span class="n">AsyncOpenAI</span><span class="p">(),</span>
</span><span id="__span-6-60">    <span class="p">)</span>
</span><span id="__span-6-61"><span class="p">)</span>
</span><span id="__span-6-62">
</span><span id="__span-6-63"><span class="c1"># Create the Cybersecurity Lead Agent (can hand off to both Bash and Crypto)</span>
</span><span id="__span-6-64"><span class="n">cybersecurity_lead</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
</span><span id="__span-6-65">    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Cybersecurity Lead Agent&quot;</span><span class="p">,</span>
</span><span id="__span-6-66">    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Lead agent focused on conquering security challenges by delegating to specialist agents&quot;</span><span class="p">,</span>
</span><span id="__span-6-67">    <span class="n">instructions</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">RECOMMENDED_PROMPT_PREFIX</span><span class="si">}</span>
</span><span id="__span-6-68"><span class="s2">    You are a Cybersecurity expert Leader facing cybersecurity challenges. </span>
</span><span id="__span-6-69"><span class="s2">    - Hand off to the Bash Agent when you need to execute Linux commands or navigate the file system.</span>
</span><span id="__span-6-70"><span class="s2">    - Hand off to the Cryptography Agent when you encounter encrypted data or codes that need deciphering.&quot;&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-6-71">    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">execute_cli_command</span><span class="p">],</span>
</span><span id="__span-6-72">    <span class="n">handoffs</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-6-73">        <span class="n">handoff</span><span class="p">(</span><span class="n">bash_agent</span><span class="p">),</span>
</span><span id="__span-6-74">        <span class="n">handoff</span><span class="p">(</span><span class="n">crypto_agent</span><span class="p">)</span>
</span><span id="__span-6-75">    <span class="p">],</span>
</span><span id="__span-6-76">    <span class="n">handoff_description</span><span class="o">=</span><span class="s2">&quot;Lead agent in cybersecurity operations&quot;</span><span class="p">,</span>
</span><span id="__span-6-77">    <span class="n">model</span><span class="o">=</span><span class="n">OpenAIChatCompletionsModel</span><span class="p">(</span>
</span><span id="__span-6-78">        <span class="n">model</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;CAI_MODEL&#39;</span><span class="p">,</span> <span class="s2">&quot;qwen2.5:14b&quot;</span><span class="p">),</span>
</span><span id="__span-6-79">        <span class="n">openai_client</span><span class="o">=</span><span class="n">AsyncOpenAI</span><span class="p">(),</span>
</span><span id="__span-6-80">    <span class="p">)</span>
</span><span id="__span-6-81"><span class="p">)</span>
</span><span id="__span-6-82">
</span><span id="__span-6-83">
</span><span id="__span-6-84"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
</span><span id="__span-6-85">    <span class="c1"># Trace the entire run as a single workflow</span>
</span><span id="__span-6-86">    <span class="k">with</span> <span class="n">trace</span><span class="p">(</span><span class="n">workflow_name</span><span class="o">=</span><span class="s2">&quot;CTF Workflow&quot;</span><span class="p">):</span>
</span><span id="__span-6-87">        <span class="c1"># Run with cybersecurity_lead directly</span>
</span><span id="__span-6-88">        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Runner</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">cybersecurity_lead</span><span class="p">,</span> <span class="s2">&quot;List directories to find the flag&quot;</span><span class="p">)</span>
</span><span id="__span-6-89">
</span><span id="__span-6-90">    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">final_output</span><span class="p">)</span>
</span><span id="__span-6-91">
</span><span id="__span-6-92"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
</span><span id="__span-6-93">    <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</span></code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "content.code.select", "navigation.path", "navigation.sections", "navigation.expand", "content.code.annotate"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>